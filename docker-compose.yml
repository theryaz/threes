version: "3"
services:
  client:
    image: node:16.13.1-alpine
    volumes:
      - .:/app
    working_dir: /app/client-ts
    ports:
      - 8080:8080
    command: npm start
  server:
    image: node:16.13.1-alpine
    environment:
      - MONGO_URL=mongodb://mongo/threeswithfriends
      - JWT_SECRET=changeme
      - LOG_LEVEL=silly
      - NODE_ENV=local
    ports:
      - 4280:4280
    working_dir: /app/server
    volumes:
      - .:/app
    command: npm start
  mongo:
    image: mongo:4.0.9
    volumes:
      - mongo_data:/data/db
    logging:
      driver: none
  redis:
    image: redis:5.0.7
    # logging:
    #   driver: syslog

volumes:
  mongo_data: